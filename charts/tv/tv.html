
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'>
<html>
<head>
<script type="text/javascript" 
        src="https://unpkg.com/lightweight-charts@3.4.0/dist/lightweight-charts.standalone.production.js"></script>
<script src="btceth.js"></script>
<title id="doc-title">TradingView Ratio Chart</title>
</head>
<body bgcolor='ivory'>
<h3 id="chart-title">TradingView Ratio Chart</h3>
<style>
html,
body,
#container {
   width: 85%;
   height: 100%;
   overflow: hidden;
   margin: 5;
}
</style>
<h3>Attribution</h3>
<p>TradingView 
<a href='https://tradingview.github.io/lightweight-charts/docs'>Lightweight 
Charts</a>™<br/>
Copyright (с) 2023 
<a href='https://www.tradingview.com/'>TradingView, Inc. 
https://www.tradingview.com/</a></p>
<p>&nbsp;</p>
<div id="container"></div>
</body>

<script>

const ttl = "Tradingview Ratio Chart: ".concat(emas.name);
document.getElementById("doc-title").innerHTML = ttl;
document.getElementById("chart-title").innerHTML = ttl;

const chartOptions = {
    layout: {
        textColor: 'black',
        background: { type: 'solid', color: 'white' },
    },
};
const chart = 
   LightweightCharts.createChart(document.getElementById('container'),
                                 chartOptions);

const ratData =
   emas.emas.map(d => { 
      let ans = { time:  new Date(d.date).getTime() / 1000,
                  value: +d.ratio };
      return ans });

const ratSeries = chart.addLineSeries({ color: 'green', lineWidth: 2 });
ratSeries.setData(ratData);

const emaData =
   emas.emas.map(d => {
      let ans = { time:  new Date(d.date).getTime() / 1000,
                  value: +d.ema };
      return ans });

const emaSeries = chart.addLineSeries({ color: 'blue', lineWidth: 2 });
emaSeries.setData(emaData);

</script>
</html>
